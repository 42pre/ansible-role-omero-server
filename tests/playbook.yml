---

- include: ../example.yml

# Additional tasks for setting up tests
- hosts: all
  tasks:

  - name: create import user
    user:
      name: data-importer
      group: importer

  - name: create data directory
    file:
      path: /data/import
      state: directory

  - name: create fake image
    copy:
      content: ''
      dest: /data/import/test.fake

# testinfra Sudo doesn't use the `-i` flag, so the working directory needs
# to be accessible
- hosts: vagrant-hosts
  tasks:
  - name: make vagrant home accessible
    file:
      owner: vagrant
      group: vagrant
      mode: "0711"
      path: /home/vagrant
      state: directory
